{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended",
    "security:openssf-scorecard"
  ],
  "dockerfile": {
    "managerFilePatterns": [
      "/^dockerfile\\.node$/"
    ]
  },
  "customManagers": [
    {
      "customType": "regex",
      "description": "Update better-sqlite3 version in dockerfile.node",
      "managerFilePatterns": [
        "/^dockerfile\\.node$/"
      ],
      "matchStrings": [
        "better-sqlite3-bun\"\\|\"(?<currentValue>[\\d.]+)\"\\|"
      ],
      "depNameTemplate": "better-sqlite3",
      "datasourceTemplate": "npm"
    },
    {
      "customType": "regex",
      "description": "Update tsx version in dockerfile.node",
      "managerFilePatterns": [
        "/^dockerfile\\.node$/"
      ],
      "matchStrings": [
        "tsx@(?<currentValue>[^\\s]+)"
      ],
      "depNameTemplate": "tsx",
      "datasourceTemplate": "npm"
    }
  ],
  "baseBranchPatterns": [
    "develop"
  ],
  "timezone": "UTC",
  "schedule": [
    "before 6am on monday",
    "before 6am on thursday"
  ],
  "prConcurrentLimit": 5,
  "prHourlyLimit": 10,
  "semanticCommits": "enabled",
  "semanticCommitType": "chore",
  "semanticCommitScope": "deps",
  "branchPrefix": "renovate/",
  "pinDigests": true,
  "labels": [
    "dependencies"
  ],
  "assignees": [
    "jamcalli"
  ],
  "reviewers": [
    "jamcalli"
  ],
  "packageRules": [
    {
      "description": "Group all Radix UI components",
      "groupName": "Radix UI",
      "matchPackageNames": [
        "/^@radix-ui//"
      ]
    },
    {
      "description": "Group all Fastify plugins",
      "groupName": "Fastify ecosystem",
      "matchPackageNames": [
        "/^@fastify//",
        "/^fastify/",
        "!fastify-cli",
        "!fastify-tsconfig",
        "!@fastify/vite",
        "!@fastify/react"
      ]
    },
    {
      "description": "Group TypeScript types",
      "groupName": "TypeScript types",
      "matchPackageNames": [
        "/^@types//"
      ]
    },
    {
      "description": "Group build tools and Fastify integration",
      "groupName": "Build tools",
      "matchPackageNames": [
        "vite",
        "@vitejs/plugin-react",
        "@fastify/vite",
        "@fastify/react",
        "typescript",
        "tsc-alias",
        "tsx",
        "@biomejs/biome"
      ]
    },
    {
      "description": "Use widen strategy for peer dependencies",
      "matchDepTypes": [
        "peerDependencies"
      ],
      "rangeStrategy": "widen"
    },
    {
      "description": "Group database dependencies",
      "groupName": "Database",
      "matchPackageNames": [
        "knex",
        "better-sqlite3",
        "pg",
        "@types/better-sqlite3",
        "@types/pg"
      ]
    },
    {
      "description": "Group React ecosystem",
      "groupName": "React",
      "matchPackageNames": [
        "react",
        "react-dom",
        "react-hook-form",
        "react-router-dom",
        "@hookform/resolvers",
        "zod",
        "@types/react",
        "@types/react-dom"
      ]
    },
    {
      "description": "Group TanStack packages (React Query, React Table)",
      "groupName": "TanStack",
      "matchPackageNames": [
        "/^@tanstack//"
      ]
    },
    {
      "description": "Group Tailwind ecosystem",
      "groupName": "Tailwind CSS",
      "matchPackageNames": [
        "tailwindcss",
        "@tailwindcss/postcss",
        "postcss",
        "autoprefixer",
        "tailwind-merge",
        "class-variance-authority",
        "tw-animate-css"
      ]
    },
    {
      "description": "Separate major updates for manual review",
      "matchUpdateTypes": [
        "major"
      ],
      "labels": [
        "dependencies",
        "major-update"
      ],
      "reviewers": [
        "jamcalli"
      ],
      "prPriority": 10
    },
    {
      "description": "Weekly digest for dev dependencies not covered by named groups",
      "matchDepTypes": [
        "devDependencies"
      ],
      "groupName": "Dev dependencies (non-critical)",
      "matchPackageNames": [
        "!typescript",
        "!@biomejs/biome",
        "!vite",
        "!@vitejs/plugin-react",
        "!tailwindcss",
        "!@tailwindcss/postcss",
        "!postcss",
        "!autoprefixer",
        "!tailwind-merge",
        "!class-variance-authority",
        "!tw-animate-css",
        "!/^@types//",
        "!/^@radix-ui//",
        "!/^@tanstack//",
        "!react",
        "!react-dom",
        "!react-hook-form",
        "!react-router-dom",
        "!@hookform/resolvers",
        "!recharts"
      ]
    },
    {
      "description": "Never pin or update own Docker images - users need latest tags",
      "matchPackageNames": [
        "/^(?:ghcr\\.io\\/)?lakker\\/pulsarr$/"
      ],
      "matchDatasources": [
        "docker"
      ],
      "enabled": false
    },
    {
      "description": "Pin all GitHub Actions to commit SHAs for security",
      "matchManagers": [
        "github-actions"
      ],
      "pinDigests": true
    },
    {
      "description": "Auto-merge patch/minor GitHub Actions updates after stability period",
      "matchManagers": [
        "github-actions"
      ],
      "groupName": "GitHub Actions",
      "matchUpdateTypes": [
        "patch",
        "minor",
        "pinDigest"
      ],
      "minimumReleaseAge": "3 days",
      "automerge": true,
      "automergeType": "pr"
    },
    {
      "description": "Require manual review for major GitHub Actions updates",
      "matchManagers": [
        "github-actions"
      ],
      "matchUpdateTypes": [
        "major"
      ],
      "automerge": false,
      "minimumReleaseAge": "7 days"
    },
    {
      "description": "Pin recharts to v2.x to prevent breaking changes with component library",
      "matchPackageNames": [
        "recharts"
      ],
      "allowedVersions": "< 3.0.0"
    },
    {
      "description": "Ignore regular updates for docs dependencies but keep security alerts",
      "matchFileNames": [
        "docs/**"
      ],
      "enabled": false
    },
    {
      "description": "Enable vulnerability alerts for docs dependencies",
      "matchFileNames": [
        "docs/**"
      ],
      "vulnerabilityAlerts": {
        "enabled": true
      }
    },
    {
      "description": "High priority for vulnerability alerts",
      "matchDatasources": [
        "*"
      ],
      "vulnerabilityAlerts": {
        "enabled": true
      },
      "prPriority": 20
    },
    {
      "description": "Auto-merge patch updates for Radix UI",
      "groupName": "Radix UI",
      "matchPackageNames": [
        "/^@radix-ui//"
      ],
      "matchUpdateTypes": [
        "patch"
      ],
      "automerge": true,
      "automergeType": "pr",
      "minimumReleaseAge": "2 days"
    },
    {
      "description": "Auto-merge patch updates for TypeScript types",
      "groupName": "TypeScript types",
      "matchPackageNames": [
        "/^@types//",
        "!@types/node"
      ],
      "matchUpdateTypes": [
        "patch"
      ],
      "automerge": true,
      "automergeType": "pr",
      "minimumReleaseAge": "2 days"
    },
    {
      "description": "Auto-merge patch updates for Database",
      "groupName": "Database",
      "matchPackageNames": [
        "knex",
        "better-sqlite3",
        "pg",
        "@types/better-sqlite3",
        "@types/pg"
      ],
      "matchUpdateTypes": [
        "patch"
      ],
      "automerge": true,
      "automergeType": "pr",
      "minimumReleaseAge": "2 days"
    },
    {
      "description": "Auto-merge patch updates for React",
      "groupName": "React",
      "matchPackageNames": [
        "react",
        "react-dom",
        "react-hook-form",
        "react-router-dom",
        "@hookform/resolvers",
        "zod",
        "@types/react",
        "@types/react-dom"
      ],
      "matchUpdateTypes": [
        "patch"
      ],
      "automerge": true,
      "automergeType": "pr",
      "minimumReleaseAge": "2 days"
    },
    {
      "description": "Auto-merge patch updates for Tailwind CSS",
      "groupName": "Tailwind CSS",
      "matchPackageNames": [
        "tailwindcss",
        "@tailwindcss/postcss",
        "postcss",
        "autoprefixer",
        "tailwind-merge",
        "class-variance-authority",
        "tw-animate-css"
      ],
      "matchUpdateTypes": [
        "patch"
      ],
      "automerge": true,
      "automergeType": "pr",
      "minimumReleaseAge": "2 days"
    },
    {
      "description": "Auto-merge patch updates for TanStack",
      "groupName": "TanStack",
      "matchPackageNames": [
        "/^@tanstack//"
      ],
      "matchUpdateTypes": [
        "patch"
      ],
      "automerge": true,
      "automergeType": "pr",
      "minimumReleaseAge": "2 days"
    },
    {
      "description": "Auto-merge patch updates for Fastify ecosystem",
      "groupName": "Fastify ecosystem",
      "matchPackageNames": [
        "/^@fastify//",
        "/^fastify/",
        "!fastify-cli",
        "!fastify-tsconfig",
        "!@fastify/vite",
        "!@fastify/react"
      ],
      "matchUpdateTypes": [
        "patch"
      ],
      "automerge": true,
      "automergeType": "pr",
      "minimumReleaseAge": "2 days"
    },
    {
      "description": "Auto-merge minor and patch updates for dev dependencies",
      "matchDepTypes": [
        "devDependencies"
      ],
      "matchUpdateTypes": [
        "minor",
        "patch"
      ],
      "automerge": true,
      "automergeType": "pr",
      "minimumReleaseAge": "3 days"
    },
    {
      "description": "Group all other dependencies to reduce PR count",
      "groupName": "All other dependencies",
      "matchDepTypes": [
        "dependencies"
      ],
      "matchUpdateTypes": [
        "patch"
      ],
      "automerge": true,
      "automergeType": "pr",
      "minimumReleaseAge": "3 days",
      "matchPackageNames": [
        "/.*/",
        "!/^@radix-ui//",
        "!/^@fastify//",
        "!/^fastify/",
        "!/^@types//",
        "!vite",
        "!@vitejs/plugin-react",
        "!@fastify/vite",
        "!@fastify/react",
        "!typescript",
        "!tsc-alias",
        "!tsx",
        "!@biomejs/biome",
        "!knex",
        "!better-sqlite3",
        "!pg",
        "!@types/better-sqlite3",
        "!@types/pg",
        "!react",
        "!react-dom",
        "!react-hook-form",
        "!react-router-dom",
        "!@hookform/resolvers",
        "!zod",
        "!@types/react",
        "!@types/react-dom",
        "!tailwindcss",
        "!@tailwindcss/postcss",
        "!postcss",
        "!autoprefixer",
        "!tailwind-merge",
        "!class-variance-authority",
        "!tw-animate-css",
        "!/^@tanstack//",
        "!node",
        "!recharts"
      ]
    },
    {
      "description": "Pin Bun to 1.3.6 - ARM64 regression in 1.3.7+ (oven-sh/bun#26544)",
      "matchDepNames": [
        "oven/bun",
        "bun",
        "bun-types"
      ],
      "enabled": false
    }
  ],
  "vulnerabilityAlerts": {
    "enabled": true,
    "automerge": true,
    "automergeType": "pr",
    "schedule": [
      "at any time"
    ],
    "labels": [
      "security",
      "dependencies"
    ]
  },
  "lockFileMaintenance": {
    "enabled": true,
    "schedule": [
      "before 6am on monday"
    ]
  },
  "osvVulnerabilityAlerts": true
}
