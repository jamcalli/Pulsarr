"use strict";(self.webpackChunk_watchlist_v2_docs=self.webpackChunk_watchlist_v2_docs||[]).push([[2443],{10936:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"architecture","title":"Architecture","description":"Pulsarr uses a modern full-stack architecture built for reliability, performance, and scalability in self-hosted media environments.","source":"@site/docs/architecture.md","sourceDirName":".","slug":"/architecture","permalink":"/Pulsarr/docs/architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/jamcalli/pulsarr/edit/main/docs/docs/architecture.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Environment Variables Reference","permalink":"/Pulsarr/docs/development/environment-variables"},"next":{"title":"Contributing","permalink":"/Pulsarr/docs/contributing"}}');var r=i(74848),t=i(28453);const l={sidebar_position:6},o="Architecture",a={},c=[{value:"Backend Stack",id:"backend-stack",level:2},{value:"<strong>Core Server</strong>",id:"core-server",level:3},{value:"<strong>Database Layer</strong>",id:"database-layer",level:3},{value:"<strong>Key Services</strong>",id:"key-services",level:3},{value:"Frontend Stack",id:"frontend-stack",level:2},{value:"<strong>Client Application</strong>",id:"client-application",level:3},{value:"<strong>Build &amp; Development</strong>",id:"build--development",level:3},{value:"Database Architecture",id:"database-architecture",level:2},{value:"<strong>Data Models</strong>",id:"data-models",level:3},{value:"<strong>Migration Support</strong>",id:"migration-support",level:3},{value:"External Integrations",id:"external-integrations",level:2},{value:"<strong>Media Stack</strong>",id:"media-stack",level:3},{value:"<strong>Notification Services</strong>",id:"notification-services",level:3},{value:"<strong>Real-time Features</strong>",id:"real-time-features",level:3},{value:"API Architecture",id:"api-architecture",level:2},{value:"<strong>RESTful API</strong>",id:"restful-api",level:3},{value:"<strong>Authentication</strong>",id:"authentication",level:3},{value:"Data Flow",id:"data-flow",level:2},{value:"<strong>Content Processing Pipeline</strong>",id:"content-processing-pipeline",level:3},{value:"<strong>Notification Flow</strong>",id:"notification-flow",level:3},{value:"Deployment Architecture",id:"deployment-architecture",level:2},{value:"<strong>Container Support</strong>",id:"container-support",level:3},{value:"<strong>Network Configuration</strong>",id:"network-configuration",level:3},{value:"<strong>Scaling Considerations</strong>",id:"scaling-considerations",level:3},{value:"Performance Features",id:"performance-features",level:2},{value:"<strong>Optimization</strong>",id:"optimization",level:3},{value:"<strong>Monitoring</strong>",id:"monitoring",level:3}];function d(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"architecture",children:"Architecture"})}),"\n",(0,r.jsx)(e.p,{children:"Pulsarr uses a modern full-stack architecture built for reliability, performance, and scalability in self-hosted media environments."}),"\n",(0,r.jsx)(e.h2,{id:"backend-stack",children:"Backend Stack"}),"\n",(0,r.jsx)(e.h3,{id:"core-server",children:(0,r.jsx)(e.strong,{children:"Core Server"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Node.js 22 LTS"}),": Modern JavaScript runtime with latest performance optimizations"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Fastify"}),": High-performance HTTP server with extensive plugin ecosystem"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"TypeScript"}),": Full type safety across server and client for maintainability"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Plugin Architecture"}),": Modular services with dependency injection and lifecycle management"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"database-layer",children:(0,r.jsx)(e.strong,{children:"Database Layer"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"SQLite"}),": Default lightweight database with file-based storage"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"PostgreSQL"}),": Enterprise database support for high-scale deployments"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Knex.js"}),": Query builder and migration system supporting both database types"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Migration System"}),": Automated schema updates with SQLite-to-PostgreSQL migration support"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"key-services",children:(0,r.jsx)(e.strong,{children:"Key Services"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Content Router"}),": Intelligent routing engine for Sonarr/Radarr instance selection"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Toad Scheduler"}),": Background job processing for sync operations and cleanup tasks"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Webhook Processor"}),": Real-time content import detection and notification triggers"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Queue Manager"}),": Async processing for notifications and batch operations"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Session Monitor"}),": Plex playback tracking for intelligent auto-search functionality"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"frontend-stack",children:"Frontend Stack"}),"\n",(0,r.jsx)(e.h3,{id:"client-application",children:(0,r.jsx)(e.strong,{children:"Client Application"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"React 19"}),": Modern single-page application served by Fastify"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"TypeScript"}),": Shared type definitions between client and server"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Tailwind CSS"}),": Utility-first styling with responsive design system"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Zustand"}),": Lightweight state management for client-side data"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Radix UI"}),": Accessible component primitives"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"build--development",children:(0,r.jsx)(e.strong,{children:"Build & Development"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Vite"}),": Fast development server and optimized production builds with Fastify integration"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Biome"}),": Code formatting and linting for consistent code quality"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"database-architecture",children:"Database Architecture"}),"\n",(0,r.jsx)(e.h3,{id:"data-models",children:(0,r.jsx)(e.strong,{children:"Data Models"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Users"}),": Plex user management with permissions and quota tracking"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Watchlists"}),": Content tracking with status and metadata relationships"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Instances"}),": Sonarr/Radarr configuration and routing rules"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Approvals"}),": Request workflow with expiration and bulk operations"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Notifications"}),": Delivery tracking and user preferences"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Analytics"}),": Usage statistics and performance metrics"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"migration-support",children:(0,r.jsx)(e.strong,{children:"Migration Support"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Knex Migrations"}),": Version-controlled schema evolution"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Cross-Database"}),": Compatible migrations for SQLite and PostgreSQL"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Data Migration"}),": Built-in SQLite-to-PostgreSQL data transfer utility"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"external-integrations",children:"External Integrations"}),"\n",(0,r.jsx)(e.h3,{id:"media-stack",children:(0,r.jsx)(e.strong,{children:"Media Stack"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Plex API"}),": Watchlist monitoring via RSS feeds, GraphQL, and REST endpoints"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Sonarr/Radarr APIs"}),": Content management across multiple instances"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"TMDB API"}),": Enhanced metadata and poster artwork fetching"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"notification-services",children:(0,r.jsx)(e.strong,{children:"Notification Services"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Discord Bot"}),": Interactive commands, approval management, and user DMs"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Discord Webhooks"}),": Administrative notifications and public content announcements"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Tautulli"}),": Native Plex mobile app notifications via notification agents"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Apprise"}),": 80+ notification services (Telegram, Slack, email, SMS, etc.)"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"real-time-features",children:(0,r.jsx)(e.strong,{children:"Real-time Features"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Plex Label Sync"}),": Webhook-driven automatic label management"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Webhook Processing"}),": Instant content import detection and user notifications"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Server-Sent Events"}),": Live UI updates for approval status and sync progress"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"api-architecture",children:"API Architecture"}),"\n",(0,r.jsx)(e.h3,{id:"restful-api",children:(0,r.jsx)(e.strong,{children:"RESTful API"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"OpenAPI Specification"}),": Auto-generated documentation with interactive testing"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Scalar API Docs"}),": Built-in documentation UI served at ",(0,r.jsx)(e.code,{children:"/api/docs"})," via Fastify Swagger plugin"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Typed Routes"}),": End-to-end type safety from client to database"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Middleware Pipeline"}),": Authentication, validation, logging, and error handling"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Rate Limiting"}),": Configurable request throttling and abuse prevention"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"authentication",children:(0,r.jsx)(e.strong,{children:"Authentication"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Session Management"}),": Secure cookie-based authentication with configurable options"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Flexible Auth Modes"}),": Required, local-only bypass, or completely disabled"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Permission System"}),": User-level access control and administrative privileges"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"data-flow",children:"Data Flow"}),"\n",(0,r.jsx)(e.h3,{id:"content-processing-pipeline",children:(0,r.jsx)(e.strong,{children:"Content Processing Pipeline"})}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Watchlist Detection"}),": RSS monitoring (Plex Pass) or polling (non-Plex Pass)"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Permission Validation"}),": User sync permissions and quota enforcement"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Content Analysis"}),": Metadata evaluation and routing rule application"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Instance Selection"}),": Intelligent routing based on content criteria"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Approval Workflow"}),": Optional administrative review process"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Content Acquisition"}),": API calls to selected Sonarr/Radarr instances"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Import Detection"}),": Webhook monitoring for successful content acquisition"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Notification Delivery"}),": Multi-channel user notifications"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"notification-flow",children:(0,r.jsx)(e.strong,{children:"Notification Flow"})}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Webhook Reception"}),": Real-time import events from Sonarr/Radarr"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Content Matching"}),": GUID and metadata matching to identify requesting users"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Smart Batching"}),": Season episode grouping and spam prevention"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"User Targeting"}),": Preference-based notification filtering"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Multi-Channel Delivery"}),": Parallel delivery across enabled notification methods"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Delivery Tracking"}),": Success/failure monitoring and retry logic"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"deployment-architecture",children:"Deployment Architecture"}),"\n",(0,r.jsx)(e.h3,{id:"container-support",children:(0,r.jsx)(e.strong,{children:"Container Support"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Docker"}),": Official multi-arch images (amd64, arm64)"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Docker Compose"}),": Sample configurations with service dependencies"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Volume Management"}),": Persistent data and configuration storage"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"network-configuration",children:(0,r.jsx)(e.strong,{children:"Network Configuration"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Service Discovery"}),": Docker network integration for container communication"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Webhook Endpoints"}),": External accessibility for Sonarr/Radarr callbacks"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Reverse Proxy"}),": Support for Nginx, Traefik, and other proxy solutions"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"scaling-considerations",children:(0,r.jsx)(e.strong,{children:"Scaling Considerations"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Database"}),": PostgreSQL for high-scale deployments with connection pooling"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Processing"}),": Configurable concurrency limits for API calls and processing"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Monitoring"}),": Comprehensive logging with structured output and log rotation"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"performance-features",children:"Performance Features"}),"\n",(0,r.jsx)(e.h3,{id:"optimization",children:(0,r.jsx)(e.strong,{children:"Optimization"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Caching"}),": Intelligent metadata caching to reduce external API calls"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Connection Pooling"}),": Efficient database connection management"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Batch Operations"}),": Grouped API calls for multi-instance content synchronization"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Background Processing"}),": Async queues for non-blocking user operations"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"monitoring",children:(0,r.jsx)(e.strong,{children:"Monitoring"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Structured Logging"}),": JSON output with configurable levels and filtering"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Health Checks"}),": API endpoints for container orchestration health monitoring"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Metrics"}),": Built-in analytics for content routing and user activity patterns"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Error Tracking"}),": Comprehensive error logging with context preservation"]}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}}}]);