"use strict";(globalThis.webpackChunk_watchlist_v2_docs=globalThis.webpackChunk_watchlist_v2_docs||[]).push([[2443],{10936(e,r,n){n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>l,default:()=>o,frontMatter:()=>d,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"architecture","title":"Architecture","description":"Pulsarr is a modern full-stack TypeScript application built for reliability and performance in self-hosted media environments.","source":"@site/docs/architecture.md","sourceDirName":".","slug":"/architecture","permalink":"/Pulsarr/docs/architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/jamcalli/pulsarr/edit/main/docs/docs/architecture.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Environment Variables Reference","permalink":"/Pulsarr/docs/development/environment-variables"},"next":{"title":"Contributing","permalink":"/Pulsarr/docs/contributing"}}');var i=n(74848),t=n(28453);const d={sidebar_position:6},l="Architecture",c={},h=[{value:"Backend",id:"backend",level:2},{value:"Core Services",id:"core-services",level:3},{value:"Frontend",id:"frontend",level:2},{value:"Database",id:"database",level:2},{value:"Data Models",id:"data-models",level:3},{value:"Integrations",id:"integrations",level:2},{value:"Media Stack",id:"media-stack",level:3},{value:"Notifications",id:"notifications",level:3},{value:"API",id:"api",level:2},{value:"Authentication",id:"authentication",level:3},{value:"Data Flow",id:"data-flow",level:2},{value:"Content Processing",id:"content-processing",level:3},{value:"Notification Flow",id:"notification-flow",level:3},{value:"Deployment",id:"deployment",level:2},{value:"Scaling",id:"scaling",level:3},{value:"Performance",id:"performance",level:2}];function a(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"architecture",children:"Architecture"})}),"\n",(0,i.jsx)(r.p,{children:"Pulsarr is a modern full-stack TypeScript application built for reliability and performance in self-hosted media environments."}),"\n",(0,i.jsx)(r.h2,{id:"backend",children:"Backend"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Technology"}),(0,i.jsx)(r.th,{children:"Purpose"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Bun"})}),(0,i.jsx)(r.td,{children:"JavaScript/TypeScript runtime"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Fastify"})}),(0,i.jsx)(r.td,{children:"High-performance HTTP server with plugin ecosystem"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"TypeScript"})}),(0,i.jsx)(r.td,{children:"Full type safety across server and client"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Knex.js"})}),(0,i.jsx)(r.td,{children:"Query builder and migrations for SQLite/PostgreSQL"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Toad Scheduler"})}),(0,i.jsx)(r.td,{children:"Background job processing"})]})]})]}),"\n",(0,i.jsx)(r.h3,{id:"core-services",children:"Core Services"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Service"}),(0,i.jsx)(r.th,{children:"Purpose"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Content Router"})}),(0,i.jsx)(r.td,{children:"Predicate-based routing to Sonarr/Radarr instances"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Webhook Processor"})}),(0,i.jsx)(r.td,{children:"Real-time import detection and notification triggers"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Queue Manager"})}),(0,i.jsx)(r.td,{children:"Async processing for notifications and batch operations"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Session Monitor"})}),(0,i.jsx)(r.td,{children:"Plex playback tracking for auto-search"})]})]})]}),"\n",(0,i.jsx)(r.h2,{id:"frontend",children:"Frontend"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Technology"}),(0,i.jsx)(r.th,{children:"Purpose"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"React 19"})}),(0,i.jsx)(r.td,{children:"Single-page application"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"TypeScript"})}),(0,i.jsx)(r.td,{children:"Shared types with server"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"TanStack Query"})}),(0,i.jsx)(r.td,{children:"Server state management and caching"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Zustand"})}),(0,i.jsx)(r.td,{children:"Client-side state management"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Tailwind CSS v4"})}),(0,i.jsx)(r.td,{children:"Utility-first styling"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Radix UI"})}),(0,i.jsx)(r.td,{children:"Accessible component primitives"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Vite"})}),(0,i.jsx)(r.td,{children:"Build tooling and dev server"})]})]})]}),"\n",(0,i.jsx)(r.h2,{id:"database",children:"Database"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Feature"}),(0,i.jsx)(r.th,{children:"Description"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"SQLite"})}),(0,i.jsx)(r.td,{children:"Default lightweight file-based storage"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"PostgreSQL"})}),(0,i.jsx)(r.td,{children:"Enterprise support for high-scale deployments"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Migrations"})}),(0,i.jsx)(r.td,{children:"Version-controlled schema with cross-database compatibility"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Data Migration"})}),(0,i.jsx)(r.td,{children:"Built-in SQLite-to-PostgreSQL transfer utility"})]})]})]}),"\n",(0,i.jsx)(r.h3,{id:"data-models",children:"Data Models"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Model"}),(0,i.jsx)(r.th,{children:"Purpose"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Users"})}),(0,i.jsx)(r.td,{children:"Plex user management, permissions, quotas"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Watchlists"})}),(0,i.jsx)(r.td,{children:"Content tracking with status and metadata"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Instances"})}),(0,i.jsx)(r.td,{children:"Sonarr/Radarr configuration and sync relationships"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Approvals"})}),(0,i.jsx)(r.td,{children:"Request workflow with expiration handling"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Notifications"})}),(0,i.jsx)(r.td,{children:"Delivery tracking and user preferences"})]})]})]}),"\n",(0,i.jsx)(r.h2,{id:"integrations",children:"Integrations"}),"\n",(0,i.jsx)(r.h3,{id:"media-stack",children:"Media Stack"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Integration"}),(0,i.jsx)(r.th,{children:"Purpose"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Plex API"})}),(0,i.jsx)(r.td,{children:"Watchlist monitoring (RSS, GraphQL, REST)"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Sonarr/Radarr APIs"})}),(0,i.jsx)(r.td,{children:"Content management across instances"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"TMDB API"})}),(0,i.jsx)(r.td,{children:"Metadata and artwork"})]})]})]}),"\n",(0,i.jsx)(r.h3,{id:"notifications",children:"Notifications"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Channel"}),(0,i.jsx)(r.th,{children:"Purpose"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Native Webhooks"})}),(0,i.jsx)(r.td,{children:"Direct HTTP callbacks to external services"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Discord Bot"})}),(0,i.jsx)(r.td,{children:"Interactive commands, approvals, user DMs"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Discord Webhooks"})}),(0,i.jsx)(r.td,{children:"Channel notifications and announcements"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Tautulli"})}),(0,i.jsx)(r.td,{children:"Native Plex mobile app notifications"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Apprise"})}),(0,i.jsx)(r.td,{children:"80+ services (Telegram, Slack, email, etc.)"})]})]})]}),"\n",(0,i.jsx)(r.h2,{id:"api",children:"API"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Feature"}),(0,i.jsx)(r.th,{children:"Description"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"OpenAPI Spec"})}),(0,i.jsx)(r.td,{children:"Auto-generated documentation"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Scalar Docs"})}),(0,i.jsxs)(r.td,{children:["Interactive API explorer at ",(0,i.jsx)(r.code,{children:"/api/docs"})]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Typed Routes"})}),(0,i.jsx)(r.td,{children:"End-to-end type safety"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Rate Limiting"})}),(0,i.jsx)(r.td,{children:"Configurable request throttling"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"SSE"})}),(0,i.jsx)(r.td,{children:"Live UI updates for progress and status"})]})]})]}),"\n",(0,i.jsx)(r.h3,{id:"authentication",children:"Authentication"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Mode"}),(0,i.jsx)(r.th,{children:"Description"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Required"})}),(0,i.jsx)(r.td,{children:"Cookie-based session authentication"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Local Bypass"})}),(0,i.jsx)(r.td,{children:"Skip auth for private network requests"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Disabled"})}),(0,i.jsx)(r.td,{children:"No authentication required"})]})]})]}),"\n",(0,i.jsx)(r.h2,{id:"data-flow",children:"Data Flow"}),"\n",(0,i.jsx)(r.h3,{id:"content-processing",children:"Content Processing"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsx)(r.li,{children:"Watchlist detection (RSS or polling)"}),"\n",(0,i.jsx)(r.li,{children:"User permission and quota validation"}),"\n",(0,i.jsx)(r.li,{children:"Content router rule evaluation"}),"\n",(0,i.jsx)(r.li,{children:"Instance selection and approval workflow"}),"\n",(0,i.jsx)(r.li,{children:"Sonarr/Radarr API calls"}),"\n",(0,i.jsx)(r.li,{children:"Webhook-based import detection"}),"\n",(0,i.jsx)(r.li,{children:"User notification delivery"}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"notification-flow",children:"Notification Flow"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsx)(r.li,{children:"Webhook received from Sonarr/Radarr"}),"\n",(0,i.jsx)(r.li,{children:"Content matched to requesting users"}),"\n",(0,i.jsx)(r.li,{children:"Smart batching (episode grouping, spam prevention)"}),"\n",(0,i.jsx)(r.li,{children:"Multi-channel parallel delivery"}),"\n",(0,i.jsx)(r.li,{children:"Delivery tracking and retry logic"}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"deployment",children:"Deployment"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Feature"}),(0,i.jsx)(r.th,{children:"Description"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Docker"})}),(0,i.jsx)(r.td,{children:"Official multi-arch images (amd64, arm64)"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Docker Compose"})}),(0,i.jsx)(r.td,{children:"Sample configurations included"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Reverse Proxy"})}),(0,i.jsx)(r.td,{children:"Nginx, Traefik, and other proxies"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Webhook Endpoints"})}),(0,i.jsx)(r.td,{children:"External accessibility for Arr callbacks"})]})]})]}),"\n",(0,i.jsx)(r.h3,{id:"scaling",children:"Scaling"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Consideration"}),(0,i.jsx)(r.th,{children:"Solution"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"High-scale"})}),(0,i.jsx)(r.td,{children:"PostgreSQL with connection pooling"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Concurrency"})}),(0,i.jsx)(r.td,{children:"Configurable limits for API calls"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Logging"})}),(0,i.jsx)(r.td,{children:"Structured JSON output with rotation"})]})]})]}),"\n",(0,i.jsx)(r.h2,{id:"performance",children:"Performance"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Feature"}),(0,i.jsx)(r.th,{children:"Description"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Caching"})}),(0,i.jsx)(r.td,{children:"Metadata caching to reduce API calls"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Batch Operations"})}),(0,i.jsx)(r.td,{children:"Grouped API calls for multi-instance sync"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Background Processing"})}),(0,i.jsx)(r.td,{children:"Async queues for non-blocking operations"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Health Checks"})}),(0,i.jsx)(r.td,{children:"Endpoints for container orchestration"})]})]})]})]})}function o(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}}}]);